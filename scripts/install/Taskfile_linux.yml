version: '3'

tasks:
  hadolint:
    desc: "Install hadolint on linux"
    cmds:
      - |
        sudo wget -O /bin/hadolint https://github.com/hadolint/hadolint/releases/download/v2.12.0/hadolint-Linux-x86_64
        sudo chmod +x /bin/hadolint
  
  postgresql:
    desc: "Install postgresql on linux (ubuntu)"
    cmds:
      - |
        sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
        wget -qO- https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo tee /etc/apt/trusted.gpg.d/pgdg.asc &>/dev/null
        sudo apt update
        sudo apt install postgresql postgresql-client -y
        sudo systemctl status postgresql

  gotools:
    desc: "Install golang tools"
    cmds:
      - ./install/sh/gotools.sh