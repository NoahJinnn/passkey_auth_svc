version: '3'

includes:
  install: ./install/Taskfile_{{OS}}.yml
  build: ./build/Taskfile_{{OS}}.yml

tasks:
  run:
    desc: "Go run app with dev env"
    cmds:
      - ./sh/run_macos {{.PROFILE}}

  run-gcp:
    desc: "Go run app with dev env"
    cmds:
      - ./sh/run_macos_gcp "{{.CLI_ARGS}}"

  test:
    desc: "Run test"
    cmds:
      - ./sh/test_macos

  stat:
    desc: "Get code statistics"
    cmds:
      - ./sh/stat_macos
  
  migrate:
    desc: "Migrate DBs"
    cmds:
      - ./sql/migrate_diff.sh